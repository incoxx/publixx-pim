import{t as c,v as o,L as b,M as f,j as g,x as y,E as h,D as x,y as m,r as n,q as d}from"./vendor-B0bC02TM.js";import{c as s,f as E,D as _}from"./index-B_89pp-1.js";const k={exportProducts(e={}){return s.get("/export/products",{params:E(e)})},exportSingleProduct(e){return s.get(`/export/products/${e}`)},bulkExport(e){return s.post("/export/products/bulk",e)},exportForPublixx(e){return s.get(`/export/products/${e}/publixx`)},exportWithPql(e){return s.post("/export/query",e)}},w={class:"space-y-6"},P={class:"pim-card p-6 space-y-4"},q=["disabled"],V={key:0,class:"p-3 rounded-lg bg-[var(--color-error-light)] text-[var(--color-error)] text-sm"},D={key:1,class:"pim-card p-6"},N={class:"font-mono text-xs bg-[var(--color-bg)] p-4 rounded-lg overflow-auto max-h-[400px]"},W={__name:"ExportView",setup(e){const p=n(""),u=n(null),a=n(!1),l=n("");async function v(){var i,t;a.value=!0,l.value="";try{const{data:r}=await k.exportWithPql({query:p.value||"*"});u.value=r}catch(r){l.value=((t=(i=r.response)==null?void 0:i.data)==null?void 0:t.title)||"Export fehlgeschlagen"}finally{a.value=!1}}return(i,t)=>(d(),c("div",w,[t[3]||(t[3]=o("h2",{class:"text-lg font-semibold text-[var(--color-text-primary)]"},"Export",-1)),o("div",P,[o("div",null,[t[1]||(t[1]=o("label",{class:"block text-[12px] font-medium text-[var(--color-text-secondary)] mb-1"},"PQL-Query (optional)",-1)),b(o("textarea",{"onUpdate:modelValue":t[0]||(t[0]=r=>p.value=r),class:"pim-input font-mono text-xs min-h-[80px]",placeholder:'WHERE status = "active"'},null,512),[[f,p.value]])]),o("button",{class:"pim-btn pim-btn-primary",disabled:a.value,onClick:v},[g(y(_),{class:"w-4 h-4","stroke-width":2}),h(" "+x(a.value?"Exportieren...":"Export starten"),1)],8,q)]),l.value?(d(),c("div",V,x(l.value),1)):m("",!0),u.value?(d(),c("div",D,[t[2]||(t[2]=o("h3",{class:"text-sm font-semibold mb-3"},"Ergebnis",-1)),o("pre",N,x(JSON.stringify(u.value,null,2)),1)])):m("",!0)]))}};export{W as default};
