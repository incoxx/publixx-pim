import{e as U,c as n,U as I,D as w}from"./index-B6UkL2Yr.js";import{t as p,v as e,j as u,x as m,D as v,y,E as _,r as x,q as h}from"./vendor-B0bC02TM.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=U("FileSpreadsheetIcon",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]),b={upload(a){const i=new FormData;return i.append("file",a),n.post("/imports",i,{headers:{"Content-Type":"multipart/form-data"}})},getStatus(a){return n.get(`/imports/${a}`)},getPreview(a){return n.get(`/imports/${a}/preview`)},execute(a){return n.post(`/imports/${a}/execute`)},getResult(a){return n.get(`/imports/${a}/result`)},downloadTemplate(a){return n.get(`/imports/templates/${a}`,{responseType:"blob"})},cancel(a){return n.delete(`/imports/${a}`)}},C={class:"space-y-6"},M={class:"pim-card p-8"},T={class:"border-2 border-dashed border-[var(--color-border)] rounded-xl p-12 text-center hover:border-[var(--color-accent)] transition-colors"},L={for:"import-file",class:"pim-btn pim-btn-secondary text-xs cursor-pointer"},R={key:0,class:"p-3 rounded-lg bg-[var(--color-error-light)] text-[var(--color-error)] text-sm"},S={key:1,class:"pim-card p-6 space-y-4"},E={class:"flex items-center gap-3"},N={class:"text-sm font-medium"},j={class:"text-xs text-[var(--color-text-tertiary)]"},q={class:"pim-card p-6"},B={class:"flex gap-2"},A={__name:"ImportView",setup(a){const i=x(null),l=x(null),f=x(!1),c=x("");async function $(r){var s,o,g;const t=(s=r.target.files)==null?void 0:s[0];if(t){i.value=t,f.value=!0,c.value="";try{const{data:d}=await b.upload(t);l.value=d.data||d}catch(d){c.value=((g=(o=d.response)==null?void 0:o.data)==null?void 0:g.title)||"Upload fehlgeschlagen"}finally{f.value=!1}}}async function D(){var r,t;if(l.value)try{await b.execute(l.value.id),l.value.status="executing"}catch(s){c.value=((t=(r=s.response)==null?void 0:r.data)==null?void 0:t.title)||"Import fehlgeschlagen"}}async function k(r){const{data:t}=await b.downloadTemplate(r),s=URL.createObjectURL(t),o=document.createElement("a");o.href=s,o.download=`import-template-${r}.xlsx`,o.click(),URL.revokeObjectURL(s)}return(r,t)=>{var s;return h(),p("div",C,[t[6]||(t[6]=e("h2",{class:"text-lg font-semibold text-[var(--color-text-primary)]"},"Import",-1)),e("div",M,[e("div",T,[u(m(I),{class:"w-8 h-8 mx-auto mb-3 text-[var(--color-text-tertiary)]","stroke-width":1.5}),t[2]||(t[2]=e("p",{class:"text-sm text-[var(--color-text-secondary)] mb-2"},"Excel-Datei hier ablegen oder klicken",-1)),e("input",{type:"file",accept:".xlsx,.xls,.csv",class:"hidden",id:"import-file",onChange:$},null,32),e("label",L,v(f.value?"Hochladen...":"Datei auswaehlen"),1)])]),c.value?(h(),p("div",R,v(c.value),1)):y("",!0),l.value?(h(),p("div",S,[e("div",E,[u(m(V),{class:"w-5 h-5 text-[var(--color-accent)]","stroke-width":1.75}),e("div",null,[e("p",N,v((s=i.value)==null?void 0:s.name),1),e("p",j,"Status: "+v(l.value.status),1)])]),l.value.status==="validated"?(h(),p("button",{key:0,class:"pim-btn pim-btn-primary",onClick:D},"Import ausfuehren")):y("",!0)])):y("",!0),e("div",q,[t[5]||(t[5]=e("h3",{class:"text-sm font-semibold text-[var(--color-text-primary)] mb-3"},"Vorlagen herunterladen",-1)),e("div",B,[e("button",{class:"pim-btn pim-btn-secondary text-xs",onClick:t[0]||(t[0]=o=>k("products"))},[u(m(w),{class:"w-3.5 h-3.5","stroke-width":1.75}),t[3]||(t[3]=_(" Produkte",-1))]),e("button",{class:"pim-btn pim-btn-secondary text-xs",onClick:t[1]||(t[1]=o=>k("attributes"))},[u(m(w),{class:"w-3.5 h-3.5","stroke-width":1.75}),t[4]||(t[4]=_(" Attribute",-1))])])])])}}};export{A as default};
