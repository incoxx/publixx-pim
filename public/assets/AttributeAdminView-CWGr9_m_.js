import{n as S,r as o,c as N,o as C,t as V,v as l,D as b,x as e,j as A,E as D,H as w,q as P,A as k}from"./vendor-B0bC02TM.js";import{a as y,b as j,v as q,p as B}from"./attributes-C6s646L0.js";import{b as E,d as L}from"./index-aO8txVii.js";import{u as G}from"./useFilters-DIL8LqED.js";import{_ as J}from"./PimTable-DXGBbuuh.js";import{_ as R}from"./PimFilterBar-C7-0dbkt.js";import"./ellipsis-BJursEtP.js";import"./chevron-down-Dgv6ujaI.js";const U=S("attributes",()=>{const i=o([]),n=o([]),a=o([]),u=o([]),d=o(!1),f=o(null),c=o({current_page:1,last_page:1,total:0,per_page:50}),v=N(()=>["text","textarea","richtext","number","decimal","boolean","date","datetime","select","multiselect","url","email","json"]);async function x(t={}){var r,p;d.value=!0;try{const{data:m}=await y.list({perPage:c.value.per_page,page:c.value.current_page,include:"valueList,unitGroup",...t});i.value=m.data,m.meta&&(c.value=m.meta)}catch(m){f.value=((p=(r=m.response)==null?void 0:r.data)==null?void 0:p.title)||"Fehler"}finally{d.value=!1}}async function g(){const{data:t}=await j.list();n.value=t.data||t}async function _(){const{data:t}=await q.list({include:"entries"});a.value=t.data||t}async function h(){const{data:t}=await B.list();u.value=t.data||t}async function s(t){const{data:r}=await y.create(t);return r.data||r}async function F(t,r){const{data:p}=await y.update(t,r);return p.data||p}async function T(t){await y.delete(t),i.value=i.value.filter(r=>r.id!==t)}return{items:i,types:n,lists:a,prodTypes:u,loading:d,error:f,meta:c,dataTypes:v,fetchAttributes:x,fetchTypes:g,fetchValueLists:_,fetchProductTypes:h,createAttribute:s,updateAttribute:F,deleteAttribute:T}}),$={class:"space-y-4"},z={class:"flex items-center justify-between"},H={class:"text-lg font-semibold text-[var(--color-text-primary)]"},I={class:"pim-btn pim-btn-primary"},K={class:"pim-badge bg-[var(--color-bg)] text-[var(--color-text-secondary)]"},et={__name:"AttributeAdminView",setup(i){const{t:n}=E(),a=U(),{search:u,activeFilters:d,setSearch:f,removeFilter:c,clearFilters:v}=G(()=>{a.fetchAttributes({search:u.value})}),x=[{key:"code",label:"Code",sortable:!0,mono:!0},{key:"name_de",label:"Name (DE)",sortable:!0},{key:"data_type",label:"Datentyp",sortable:!0},{key:"is_required",label:"Pflicht"},{key:"is_searchable",label:"Suchbar"},{key:"attribute_type.name_de",label:"Gruppe"}];function g(_,h){a.fetchAttributes({sort:_,order:h})}return C(()=>{a.fetchAttributes(),a.fetchTypes()}),(_,h)=>(P(),V("div",$,[l("div",z,[l("h2",H,b(e(n)("attribute.title")),1),l("button",I,[A(e(L),{class:"w-4 h-4","stroke-width":2}),D(" "+b(e(n)("attribute.newAttribute")),1)])]),A(R,{search:e(u),activeFilters:e(d),placeholder:"Attribute durchsuchenâ€¦","onUpdate:search":e(f),onRemoveFilter:e(c),onClearAll:e(v)},null,8,["search","activeFilters","onUpdate:search","onRemoveFilter","onClearAll"]),A(J,{columns:x,rows:e(a).items,loading:e(a).loading,selectable:"",emptyText:"Keine Attribute gefunden",onSort:g},{"cell-data_type":w(({value:s})=>[l("span",K,b(s),1)]),"cell-is_required":w(({value:s})=>[l("span",{class:k(s?"text-[var(--color-success)]":"text-[var(--color-text-tertiary)]")},b(s?"Ja":"Nein"),3)]),"cell-is_searchable":w(({value:s})=>[l("span",{class:k(s?"text-[var(--color-success)]":"text-[var(--color-text-tertiary)]")},b(s?"Ja":"Nein"),3)]),_:1},8,["rows","loading"])]))}};export{et as default};
